<Project>

  <PropertyGroup>
    <ReferenceTrimmerTasksAssembly Condition=" '$(ReferenceTrimmerTasksAssembly)' == '' ">$(MSBuildThisFileDirectory)ReferenceTrimmer.Tasks.dll</ReferenceTrimmerTasksAssembly>
  </PropertyGroup>

  <ItemDefinitionGroup Condition=" '$(EnableReferenceTrimmer)' != 'false' and '$(ReferenceTrimmerEnableVcxproj)' != 'false' ">
    <Link>
        <!-- Enable link.exe traceouts of unused libraries and delay-load DLLs from vcxproj projects.
             This will often contain system libraries but can also include .lib files from
             referenced projects, which can indicate unneeded proj-to-proj dependencies,
             and libraries from packages that are unneeded. Example output text at the
             end of link's stdout stream:
             
             Unused libraries:
               c:\WindowsSdk\lib\10.0.22000.0\um\x64\gdi32.lib
               c:\WindowsSdk\lib\10.0.22000.0\um\x64\winspool.lib
               c:\WindowsSdk\lib\10.0.22000.0\um\x64\comdlg32.lib
               c:\WindowsSdk\lib\10.0.22000.0\um\x64\shell32.lib
             -->
        <AdditionalOptions>/VERBOSE:UNUSEDLIBS /VERBOSE:UNUSEDDELAYLOAD %(AdditionalOptions)</AdditionalOptions>
    </Link>
  </ItemDefinitionGroup>

  <ItemGroup>
    <!--
      List of commonly used packages that contain build files that are not consequential, but they're preventing the reference from being trimmed.
    -->
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Caching.Abstractions" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Caching.Memory" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Configuration" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Configuration.Abstractions" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Configuration.Binder" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Configuration.CommandLine" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Configuration.EnvironmentVariables" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Configuration.FileExtensions" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Configuration.Json" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Configuration.UserSecrets" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.DependencyInjection" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.DependencyInjection.Abstractions" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.DependencyModel" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Diagnostics" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Diagnostics.Abstractions" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.FileProviders.Abstractions" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.FileProviders.Composite" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.FileProviders.Physical" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.FileSystemGlobbing" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Hosting" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Hosting.Abstractions" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Http" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Logging" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Logging.Abstractions" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Logging.Configuration" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Logging.Console" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Logging.Debug" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Logging.EventLog" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Logging.EventSource" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Options" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Options.ConfigurationExtensions" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="Microsoft.Extensions.Primitives" />
    <ReferenceTrimmerIgnorePackageBuildFiles Include="System.Text.Json" />
  </ItemGroup>

</Project>
